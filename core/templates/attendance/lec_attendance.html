{% extends 'base.html' %}

{% block body %}
    
    
  <!-- of-canvase -->

  <div class="container-fluid mt-5 pt-3" id="main">
    <div class="container-fluid" id="cont">
        <div class="row">
            <div class="col-md-12">
  <form method="post" action="{% url 'submit_attendance' %}">
    {% csrf_token %}
<!-- في مكان إضافة الإدخالات لحالة الحضور والغياب -->
{% for student in students %}
    <div class="student-attendance">
        <span>{{ student.name }}</span> <!-- افترض أن لديك حقل name في نموذج Student -->
        <!-- إضافة إدخالات الراديو لتسجيل الحضور والغياب -->
        <input type="hidden" name="student_ids" value="{{ student.idc }}">

        <input class="btn-check" type="radio" id="present_{{ student.idc }}" name="attendance_{{ student.idc }}" value="present">
        <label class="btn btn-outline-success" for="present_{{ student.idc }}">Present</label>
        <input  class="btn-check" type="radio" id="absent_{{ student.idc }}" name="attendance_{{ student.idc }}" value="absent">
        <label  class="btn btn-outline-danger" for="absent_{{ student.idc }}">Absent</label>
    </div>
{% endfor %}    
<button type="submit">Submit Attendance</button>
</div>
</form>
</div>
</div>

  </div>

  {% if messages %}
  <ul class="messages">
      {% for message in messages %}
          <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
      {% endfor %}
  </ul>
{% endif %}

  <!-- main -->

<script>
document.getElementById('markAllPresent').addEventListener('click', function() {
    document.querySelectorAll('input[type="radio"][value="present"]').forEach(function(radio) {
        radio.checked = true;
    });
});

document.getElementById('markAllAbsent').addEventListener('click', function() {
    document.querySelectorAll('input[type="radio"][value="absent"]').forEach(function(radio) {
        radio.checked = true;
    });
});

{% endblock body %}

